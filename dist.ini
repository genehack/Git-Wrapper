name    = Git-Wrapper
author  = Hans Dieter Pearcey <hdp@cpan.org>
author  = Chris Prather <chris@prather.org>
author  = John SJ Anderson <genehack@genehack.org>
license = Perl_5
copyright_holder = Hans Dieter Pearcey
copyright_year   = 2014

[GatherDir]
exclude_match    = ^release.*
exclude_filename = dist.ini
exclude_filename = INSTALL

[@Filter]
-bundle = @Basic
-remove = GatherDir
-remove = Readme
-remove = MakeMaker ; see below
-remove = ExtraTests

[MakeMaker::Awesome]
:version = 0.26
delimiter = |
header = |require File::Spec;
header = |die 'Unable to run "git config --list". Do you need to add a ~/.gitconfig file?'
header = |    if system('git config --list >'.File::Spec->devnull);

[Prereqs / ConfigureRequires]
File::Spec = 0

[Git::NextVersion]
first_version = 0.018

[CheckBin]
command = git   ; TODO: really should be able to run 'git config' for us

[AutoPrereqs]
[Prereqs / TestSuggests]
Path::Class = 0.26
Path::Tiny = 0
[Prereqs::AuthorDeps]
[GithubMeta]
homepage = http://genehack.github.com/Git-Wrapper/
user = genehack
issues = 1
[InstallGuide]
[MetaConfig]
[MetaJSON]
[NextRelease]
[PkgVersion]
[PodSyntaxTests]
[PodCoverageTests]
[PodWeaver]
[CopyFilesFromBuild]
copy = INSTALL

[RunExtraTests]

[Run::BeforeBuild]
run = rm -f Makefile.PL

[Run::AfterBuild]
run = cp %d/Makefile.PL ./
run = git status --porcelain | grep "M Makefile.PL" && git commit -m "auto-committed by dist.ini" Makefile.PL || echo Makefile.PL up to date

[Run::Release]
run = mv %a ./releases/
[Git::Commit]
add_files_in = releases/
[Git::Tag]
[Twitter]
